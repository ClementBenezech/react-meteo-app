(this["webpackJsonpmeteo-app"]=this["webpackJsonpmeteo-app"]||[]).push([[0],{120:function(e,t,a){},122:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},186:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},333:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(45),i=a.n(n),s=(a(180),a(181),a(11)),d=a(170),o=a(24),l={currentWeather:null,forecast:null,city:"toulouse",currentDay:null,currentTime:null,timezone:null};var u=Object(d.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"api/putWeatherInState":return Object(o.a)(Object(o.a)({},e),{},{currentWeather:t.payload});case"api/putForeCastInState":return Object(o.a)(Object(o.a)({},e),{},{forecast:t.payload});case"api/putCityInState":return Object(o.a)(Object(o.a)({},e),{},{city:t.payload});case"api/putTimezoneInState":return Object(o.a)(Object(o.a)({},e),{},{timezone:t.payload});case"api/putCurrentDayInState":return Object(o.a)(Object(o.a)({},e),{},{currentDay:t.payload});case"api/putCurrentTimeInState":return Object(o.a)(Object(o.a)({},e),{},{currentTime:t.payload});default:return e}}));console.log("Initial state: ",u.getState());var _=u,f=(a(120),[{label:"Clouds",icon:"fas fa-cloud",color:"grey"},{label:"Rain",icon:"fas fa-cloud-showers-heavy",color:"blue"},{label:"Clear",icon:"fas fa-sun",color:"yellow"},{label:"Drizzle",icon:"fas fa-cloud-sun-rain",color:"orange"},{label:"Snow",icon:"far fa-snowflake",color:"orange"},{label:"Mist",icon:"fas fa-smog",color:"orange"},{label:"Fog",icon:"fas fa-smog",color:"orange"}]),j="fas fa-thermometer-three-quarters",m="fas fa-wind",b=function(e){var t;return e>15&&e<=60?t="Nord-Est":e>60&&e<=105?t="Est":e>105&&e<=150?t="Sud-Est":e>150&&e<=195?t="Sud":e>195&&e<=240?t="Sud-Ouest":e>240&&e<=285?t="Ouest":e>285&&e<=330?t="Nord-Ouest":(e>330||e<=15)&&(t="Nord"),t},h=a(2),O=function(){var e=Object(s.c)((function(e){return e.currentWeather})),t=Object(s.c)((function(e){return e.timezone}));if(null!=e){if("error"!==e){var a,c=f.filter((function(t){return t.label===e.weather[0].main}))[0].icon,r=f.filter((function(t){return t.label===e.weather[0].main}))[0].label,n=e.dt+t+60*new Date(1e3*e.dt).getTimezoneOffset(),i=new Date(1e3*n).toLocaleTimeString("fr-FR").substring(0,5);return a=e.wind.gust?" - "+Math.round(e.wind.gust):"",Object(h.jsxs)("div",{className:"forecast__card forecast__card--current",children:[Object(h.jsxs)("div",{className:"forecast__card__time-weather",children:[Object(h.jsx)("div",{className:"forecast__card__time-weather__time",children:i}),Object(h.jsx)("i",{className:c+" forecast__card__time-weather__icon forecast__card__time-weather__icon--"+r+" forecast__card__time-weather__icon--big"})]}),Object(h.jsx)("div",{className:"forecast__card__city",children:e.name+", "+e.sys.country}),Object(h.jsxs)("div",{className:"forecast__card__data-container",children:[Object(h.jsxs)("div",{className:"forecast__card__temp forecast__card__temp--header",children:[Object(h.jsx)("i",{className:j+" forecast__card__temp__icon"}),Object(h.jsx)("div",{className:"forecast__card__temp__value",children:Math.round(e.main.temp)})]}),Object(h.jsxs)("div",{className:"forecast__card__wind forecast__card__wind--header",children:[Object(h.jsx)("i",{className:m+" forecast__card__wind__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind__value",children:Math.round(e.wind.speed)+a})]}),Object(h.jsxs)("div",{className:"forecast__card__wind-direction forecast__card__wind-direction--header",children:[Object(h.jsx)("i",{className:"far fa-compass forecast__card__wind-direction__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind-direction__value forecast__card__wind-direction__value--header",children:b(e.wind.deg)+" ("+e.wind.deg+"\xb0)"})]})]})]})}return Object(h.jsx)("div",{className:"forecast__card forecast__card--current",children:Object(h.jsx)("div",{className:"forecast__card__time-weather__error",children:"D\xe9sol\xe9, je n'ai pas pu trouver cette ville :("})})}return null},p=function(e){var t=Object(s.c)((function(e){return e.currentTime})),a=Object(s.c)((function(e){return e.timezone})),c=e.forecast.dt+a+60*new Date(1e3*e.forecast.dt).getTimezoneOffset(),r=new Date(1e3*c).toLocaleTimeString("fr-FR").substring(0,5),n=f.filter((function(t){return t.label===e.forecast.weather[0].main}))[0].icon,i=f.filter((function(t){return t.label===e.forecast.weather[0].main}))[0].label,d=Object(s.b)(),o="forecast__card";return e.forecast.dt==t&&(o+=" forecast__card--selected"),Object(h.jsxs)("div",{className:o,onClick:function(){console.log(e.forecast.dt),d({type:"api/putCurrentTimeInState",payload:e.forecast.dt})},children:[Object(h.jsxs)("div",{className:"forecast__card__time-weather",children:[Object(h.jsx)("div",{className:"forecast__card__time-weather__time",children:r}),Object(h.jsx)("i",{className:n+" forecast__card__time-weather__icon forecast__card__time-weather__icon--"+i})]}),Object(h.jsxs)("div",{className:"forecast__card__data-container",children:[Object(h.jsxs)("div",{className:"forecast__card__temp",children:[Object(h.jsx)("i",{className:j+" forecast__card__temp__icon"}),Object(h.jsx)("div",{className:"forecast__card__temp__value",children:Math.round(e.forecast.main.temp)})]}),Object(h.jsxs)("div",{className:"forecast__card__wind",children:[Object(h.jsx)("i",{className:m+" forecast__card__wind__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind__value",children:Math.round(e.forecast.wind.speed)+" - "+Math.round(e.forecast.wind.gust)})]}),Object(h.jsxs)("div",{className:"forecast__card__wind-direction",children:[Object(h.jsx)("i",{className:"far fa-compass forecast__card__wind-direction__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind-direction__value",children:b(e.forecast.wind.deg)+" ("+e.forecast.wind.deg+"\xb0)"})]})]})]})},v=function(e){var t=e.list.map((function(t){return new Date(1e3*(t.dt+e.city.timezone)).toLocaleDateString("en-US")})).filter((function(e,t,a){return a.indexOf(e)===t})),a=[];return t.map((function(t){var c=[];e.list.map((function(a){new Date(1e3*(a.dt+e.city.timezone+60*new Date(1e3*a.dt).getTimezoneOffset())).toLocaleDateString("en-US")===t&&c.push(a)})),a.push({date:t,data:c})})),a},x=function(e,t){var a,c=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],r=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Aout","septembre","octobre","novembre","d\xe9cembre"];if("dayOfWeek"==t)a=c[new Date(e).getDay()];else if("dayOfMonth"==t)a=new Date(e).getDate();else if("month"==t)a=r[new Date(e).getMonth()];else if("full"==t){a=c[new Date(e).getDay()-1]+" "+new Date(e).getDate()+" "+r[new Date(e).getMonth()]}return a},y=(a(186),a(110)),w=a.n(y),N=function(e){var t,a,c=Object(s.c)((function(e){return e.currentTime})),r=Object(s.c)((function(e){return e.currentTime})),n=r+Object(s.c)((function(e){return e.timezone}))+60*new Date(1e3*r).getTimezoneOffset();if(void 0!==e.forecast.data.find((function(e){return e.dt===c}))){var i,d=e.forecast.data.find((function(e){return e.dt===c})),o=d.weather.map((function(e){return t=f.filter((function(t){return t.label===e.main}))[0].icon,a=f.filter((function(t){return t.label===e.main}))[0].label,Object(h.jsx)("i",{className:t+" forecast__card__time-weather__icon forecast__card__time-weather__icon--"+a})})),l=new Date(1e3*n).toLocaleTimeString("fr-FR").substring(0,5),u=new Date(1e3*n).toLocaleDateString("fr-FR").substring(0,5);i=d.wind.gust?d.wind.gust:" / ";var _=b(d.wind.deg);return Object(h.jsx)(w.a,{bottom:!0,children:Object(h.jsxs)("div",{className:"detailed-forecast",children:[Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[o,Object(h.jsxs)("div",{className:"detailed-forecast__time",children:["Le ",u+" \xe0 "+l]})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Temperature"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:Math.round(d.main.temp)+" \xb0C"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Ressenti"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:Math.round(d.main.feels_like)+" \xb0C"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Pression Atmosph\xe9rique"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:d.main.grnd_level+" hPa"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Humidit\xe9"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:d.main.humidity+" %"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Couverture nuageuse"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:d.clouds.all+" %"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Vent Moyen"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:d.wind.speed+" m/s"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Rafales"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:i+" m/s"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Direction"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:_+" ("+d.wind.deg+"\xb0)"})]})]})})}return Object(h.jsx)(w.a,{bottom:!0,children:Object(h.jsx)("div",{className:"detailed-forecast",children:Object(h.jsx)("div",{className:"detailed-forecast__data-container",children:Object(h.jsx)("div",{className:"detailed-forecast__time",children:"Selectionnez un cr\xe9neau pour voir les pr\xe9visions d\xe9taill\xe9es"})})})})},g=function(){var e=Object(s.c)((function(e){return e.forecast})),t=Object(s.c)((function(e){return e.currentDay}));if(null!==e){var a=v(e).find((function(e){return e.date===t})),c=a.data.map((function(e){return Object(h.jsx)(p,{forecast:e})}));return Object(h.jsxs)("div",{className:"forecast__root-container",children:[Object(h.jsx)("div",{className:"forecast__day-forecasts",children:c}),Object(h.jsx)(N,{forecast:a})]})}return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"forecast__day-forecasts"})})},D=a(18),S=(a(196),function(e){var t=Object(c.useState)(null),a=Object(D.a)(t,2),r=a[0],n=a[1],i=Object(s.b)();return Object(c.useEffect)((function(){e.city.length>2?fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/"+e.city+".json?access_token=pk.eyJ1IjoiY2xlbWVudGJlbmV6ZWNoIiwiYSI6ImNrdmRweXpxMjM3cjUybmx1dG9za24yOGoifQ.8SmT7lwTGEMypFRgCD-HLw&types=place&limit=10&fuzzyMatch=false").then((function(e){return e.json()})).then((function(e){var t;t=e.features.map((function(e){return Object(h.jsx)("div",{className:"city-search-form__auto-suggest__city",onClick:function(t){t.preventDefault(),i({type:"api/putCityInState",payload:e.text+", "+e.context[e.context.length-1].short_code}),n(null)},children:e.place_name})})),n(t)})):n(null)}),[e.city]),Object(h.jsx)("div",{className:"city-search-form__auto-suggest",children:Object(h.jsx)("div",{children:r})})}),z=function(){var e=Object(s.b)(),t=r.a.useState(""),a=Object(D.a)(t,2),c=a[0],n=a[1];return Object(h.jsxs)("form",{className:"city-search-form",onSubmit:function(t){t.preventDefault(),c&&e({type:"api/putCityInState",payload:c})},children:[Object(h.jsx)("input",{placeholder:"Rechercher une ville",name:"city",value:c,type:"text",onChange:function(e){n(e.target.value)}}),Object(h.jsx)("button",{type:"submit",children:Object(h.jsx)("i",{class:"fab fa-searchengin"})}),Object(h.jsx)(S,{city:c})]})},M=(a(197),function(e,t){var a=Object(s.b)();fetch("https://api.openweathermap.org/data/2.5/"+t+"?q="+e+"&units=metric&appid=c246844ea31d730273416243a59e9e2e").then((function(e){return e.json()})).then((function(e){console.log(e);var c=e;"404"!=c.cod?"weather"==t?(a({type:"api/putWeatherInState",payload:c}),a({type:"api/putTimezoneInState",payload:c.timezone})):"forecast"==t&&(a({type:"api/putForeCastInState",payload:c}),a({type:"api/putTimezoneInState",payload:c.city.timezone})):"weather"==t?a({type:"api/putWeatherInState",payload:"error"}):"forecast"==t&&a({type:"api/putForeCastInState",payload:null})}))}),T=(a(198),function(){var e,t=Object(s.c)((function(e){return e.forecast})),a=Object(s.c)((function(e){return e.currentDay})),c=Object(s.b)();if(null!=t){var r=(e=t).list.map((function(t){return new Date(1e3*(t.dt+e.city.timezone)).toLocaleDateString("en-US")})).filter((function(e,t,a){return a.indexOf(e)===t}));void 0==r.find((function(e){return e==a}))&&(c({type:"api/putCurrentTimeInState",payload:null}),c({type:"api/putCurrentDayInState",payload:r[0]}));var n=r.map((function(e){return e==a?Object(h.jsxs)("div",{className:"day-selector__day day-selector__day",children:[Object(h.jsx)("div",{className:"day-selector__day__of-week day-selector__day__of-week--current",children:x(e,"dayOfWeek")}),Object(h.jsx)("div",{className:"day-selector__day__of-month day-selector__day__of-month--current",children:x(e,"dayOfMonth")})]}):Object(h.jsxs)("div",{className:"day-selector__day",onClick:function(){c({type:"api/putCurrentDayInState",payload:e})},children:[Object(h.jsx)("div",{className:"day-selector__day__of-week",children:x(e,"dayOfWeek")}),Object(h.jsx)("div",{className:"day-selector__day__of-month",children:x(e,"dayOfMonth")})]})}));return Object(h.jsx)("div",{className:"day-selector",children:n})}return Object(h.jsx)("div",{})}),C=a(335),I=a(87),k=a(88),F=a(72),L=a(167),W=(a(122),a(334)),R=function(e){var t=Object(s.c)((function(e){return e.currentDay})),a=Object(s.c)((function(e){return e.forecast})),c=(Object(s.c)((function(e){return e.currentTime})),Object(s.c)((function(e){return e.timezone}))),r=[];return null!==t&&null!==a?(v(a).find((function(e){return e.date===t})).data.map((function(e){var t=e.dt+c+60*new Date(1e3*e.dt).getTimezoneOffset(),a=new Date(1e3*t).toLocaleTimeString("fr-FR").substring(0,5);r.push({time:a,temperature:Math.round(e.main.temp)})})),Object(h.jsxs)("div",{className:"chart-temp",children:[Object(h.jsx)("div",{className:"chart-wind__label",children:"Courbe des temp\xe9ratures ( \xb0 Celsius)"}),Object(h.jsx)(W.a,{width:"100%",height:280,children:Object(h.jsxs)(C.a,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[Object(h.jsx)(I.a,{dataKey:"time"}),Object(h.jsx)(k.a,{type:"number",domain:["dataMin-2","dataMax+2"]}),Object(h.jsx)(F.a,{}),Object(h.jsx)(L.a,{type:"monotone",dataKey:"temperature",stroke:"#5c83a8",strokeWidth:10,label:{fill:"white",fontWeight:"bold",fontSize:25},dot:{fill:"#5c83a8",stroke:"#5c83a8",strokeWidth:5,r:17,strokeDasharray:""}})]})})]})):null},J=a(339),E=a(69),V=a(340),A=a(171),K=function(e){var t=Object(s.c)((function(e){return e.currentDay})),a=Object(s.c)((function(e){return e.forecast})),c=(Object(s.c)((function(e){return e.currentTime})),Object(s.c)((function(e){return e.timezone}))),r=[];return null!==t&&null!==a?(v(a).find((function(e){return e.date===t})).data.map((function(e){var t=e.dt+c+60*new Date(1e3*e.dt).getTimezoneOffset(),a=new Date(1e3*t).toLocaleTimeString("fr-FR").substring(0,5);r.push({time:a,"vent moyen":Math.round(e.wind.speed),rafales:Math.round(e.wind.gust)})})),Object(h.jsxs)("div",{className:"chart-wind",children:[Object(h.jsx)("div",{className:"chart-wind__label",children:"Vents (m/s)"}),Object(h.jsx)(W.a,{width:"100%",height:280,children:Object(h.jsxs)(J.a,{width:730,height:270,data:r,title:"Vitesse des vents",children:[Object(h.jsx)(E.a,{layout:"horizontal",verticalAlign:"top",align:"center"}),Object(h.jsx)(V.a,{strokeDasharray:"3 3"}),Object(h.jsx)(I.a,{dataKey:"time",label:!0}),Object(h.jsx)(k.a,{}),Object(h.jsx)(F.a,{}),Object(h.jsx)(A.a,{dataKey:"vent moyen",fill:"#63b3ff"}),Object(h.jsx)(A.a,{dataKey:"rafales",fill:"orange"})]})})]})):null};var G=function(){var e=Object(s.c)((function(e){return e.city}));return M(e,"weather"),M(e,"forecast"),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("div",{className:"search-and-result",children:Object(h.jsxs)("div",{className:"search-and-result__search-days-container",children:[Object(h.jsx)(O,{}),Object(h.jsx)(z,{})]})}),Object(h.jsx)(T,{}),Object(h.jsx)(g,{}),Object(h.jsxs)("div",{className:"charts-container",children:[Object(h.jsx)(R,{}),Object(h.jsx)(K,{})]})]})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,342)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),r(e),n(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(s.a,{store:_,children:Object(h.jsx)(G,{})})}),document.getElementById("root")),P()}},[[333,1,2]]]);
//# sourceMappingURL=main.325de25d.chunk.js.map