(this["webpackJsonpmeteo-app"]=this["webpackJsonpmeteo-app"]||[]).push([[0],{11:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){},26:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),n=a(7),i=a.n(n),s=(a(20),a(21),a(2)),d=a(15),l=a(3),o={currentWeather:null,forecast:null,city:"toulouse",currentDay:null,currentTime:null,timezone:null};var _=Object(d.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"api/putWeatherInState":return Object(l.a)(Object(l.a)({},e),{},{currentWeather:t.payload});case"api/putForeCastInState":return Object(l.a)(Object(l.a)({},e),{},{forecast:t.payload});case"api/putCityInState":return Object(l.a)(Object(l.a)({},e),{},{city:t.payload});case"api/putTimezoneInState":return Object(l.a)(Object(l.a)({},e),{},{timezone:t.payload});case"api/putCurrentDayInState":return Object(l.a)(Object(l.a)({},e),{},{currentDay:t.payload});case"api/putCurrentTimeInState":return Object(l.a)(Object(l.a)({},e),{},{currentTime:t.payload});default:return e}}));console.log("Initial state: ",_.getState());var u=_,f=(a(11),[{label:"Clouds",icon:"fas fa-cloud",color:"grey"},{label:"Rain",icon:"fas fa-cloud-showers-heavy",color:"blue"},{label:"Clear",icon:"fas fa-sun",color:"yellow"},{label:"Drizzle",icon:"fas fa-cloud-sun-rain",color:"orange"},{label:"Snow",icon:"far fa-snowflake",color:"orange"}]),j="fas fa-thermometer-three-quarters",m="fas fa-wind",b=function(e){var t;return e>15&&e<=60?t="Nord-Est":e>60&&e<=105?t="Est":e>105&&e<=150?t="Sud-Est":e>150&&e<=195?t="Sud":e>195&&e<=240?t="Sud-Ouest":e>240&&e<=285?t="Ouest":e>285&&e<=330?t="Nord-Ouest":(e>330||e<=15)&&(t="Nord"),t},h=a(0),O=function(){var e=Object(s.c)((function(e){return e.currentWeather})),t=Object(s.c)((function(e){return e.timezone}));if(null!=e){if("error"!==e){var a,c=f.filter((function(t){return t.label===e.weather[0].main}))[0].icon,r=f.filter((function(t){return t.label===e.weather[0].main}))[0].label,n=e.dt+1e3*t,i=new Date(n).toLocaleTimeString("fr-FR").substring(0,5);return a=e.wind.gust?" - "+Math.round(e.wind.gust):"",Object(h.jsxs)("div",{className:"forecast__card forecast__card--current",children:[Object(h.jsxs)("div",{className:"forecast__card__time-weather",children:[Object(h.jsx)("div",{className:"forecast__card__time-weather__time",children:i}),Object(h.jsx)("i",{className:c+" forecast__card__time-weather__icon forecast__card__time-weather__icon--"+r+" forecast__card__time-weather__icon--big"})]}),Object(h.jsx)("div",{className:"forecast__card__city",children:e.name+", "+e.sys.country}),Object(h.jsxs)("div",{className:"forecast__card__parameters-container",children:[Object(h.jsxs)("div",{className:"forecast__card__temp",children:[Object(h.jsx)("i",{className:j+" forecast__card__temp__icon"}),Object(h.jsx)("div",{className:"forecast__card__temp__value",children:Math.round(e.main.temp)})]}),Object(h.jsxs)("div",{className:"forecast__card__wind",children:[Object(h.jsx)("i",{className:m+" forecast__card__wind__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind__value",children:Math.round(e.wind.speed)+a})]}),Object(h.jsxs)("div",{className:"forecast__card__wind-direction",children:[Object(h.jsx)("i",{className:"far fa-compass forecast__card__wind-direction__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind-direction__value",children:b(e.wind.deg)+" ("+e.wind.deg+"\xb0)"})]})]})]})}return Object(h.jsx)("div",{className:"forecast__card forecast__card--current",children:Object(h.jsx)("div",{className:"forecast__card__time-weather__time",children:"So sorry, I could not find this city :("})})}return null},p=function(e){var t=Object(s.c)((function(e){return e.currentTime})),a=Object(s.c)((function(e){return e.timezone})),c=e.forecast.dt+a,r=new Date(1e3*c).toLocaleTimeString("fr-FR").substring(0,5),n=f.filter((function(t){return t.label===e.forecast.weather[0].main}))[0].icon,i=f.filter((function(t){return t.label===e.forecast.weather[0].main}))[0].label,d=Object(s.b)(),l="forecast__card";return e.forecast.dt==t&&(l+=" forecast__card--selected"),Object(h.jsxs)("div",{className:l,onClick:function(){console.log(e.forecast.dt),d({type:"api/putCurrentTimeInState",payload:e.forecast.dt})},children:[Object(h.jsxs)("div",{className:"forecast__card__time-weather",children:[Object(h.jsx)("div",{className:"forecast__card__time-weather__time",children:r}),Object(h.jsx)("i",{className:n+" forecast__card__time-weather__icon forecast__card__time-weather__icon--"+i})]}),Object(h.jsxs)("div",{className:"forecast__card__temp",children:[Object(h.jsx)("i",{className:j+" forecast__card__temp__icon"}),Object(h.jsx)("div",{className:"forecast__card__temp__value",children:Math.round(e.forecast.main.temp)})]}),Object(h.jsxs)("div",{className:"forecast__card__wind",children:[Object(h.jsx)("i",{className:m+" forecast__card__wind__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind__value",children:Math.round(e.forecast.wind.speed)+" - "+Math.round(e.forecast.wind.gust)})]}),Object(h.jsxs)("div",{className:"forecast__card__wind-direction",children:[Object(h.jsx)("i",{className:"far fa-compass forecast__card__wind-direction__icon"}),Object(h.jsx)("div",{className:"forecast__card__wind-direction__value",children:b(e.forecast.wind.deg)+" ("+e.forecast.wind.deg+"\xb0)"})]})]})},v=function(e,t){var a,c=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],r=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Aout","septembre","octobre","novembre","d\xe9cembre"];if("dayOfWeek"==t)a=c[new Date(e).getDay()];else if("dayOfMonth"==t)a=new Date(e).getDate();else if("month"==t)a=r[new Date(e).getMonth()];else if("full"==t){a=c[new Date(e).getDay()-1]+" "+new Date(e).getDate()+" "+r[new Date(e).getMonth()]}return a},x=(a(26),a(13)),y=a.n(x),N=function(e){var t,a,c=Object(s.c)((function(e){return e.currentTime})),r=Object(s.c)((function(e){return e.currentTime}))+Object(s.c)((function(e){return e.timezone}));if(void 0!==e.forecast.data.find((function(e){return e.dt===c}))){var n,i=e.forecast.data.find((function(e){return e.dt===c})),d=i.weather.map((function(e){return t=f.filter((function(t){return t.label===e.main}))[0].icon,a=f.filter((function(t){return t.label===e.main}))[0].label,Object(h.jsx)("i",{className:t+" forecast__card__time-weather__icon forecast__card__time-weather__icon--"+a})})),l=new Date(1e3*r).toLocaleTimeString("fr-FR").substring(0,5),o=new Date(1e3*r).toLocaleDateString("fr-FR").substring(0,5);n=i.wind.gust?i.wind.gust:" / ";var _=b(i.wind.deg);return Object(h.jsx)(y.a,{bottom:!0,children:Object(h.jsxs)("div",{className:"detailed-forecast",children:[Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[d,Object(h.jsx)("div",{className:"detailed-forecast__time",children:o+" @ "+l})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Temperature"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:i.main.temp+" \xb0C"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Ressenti"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:i.main.feels_like+" \xb0C"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Pression Atmosph\xe9rique"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:i.main.grnd_level+" hPa"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Humidit\xe9"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:i.main.humidity+" %"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Couverture nuageuse"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:i.clouds.all+" %"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Vent Moyen"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:i.wind.speed+" m/s"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Rafales"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:n+" m/s"})]}),Object(h.jsxs)("div",{className:"detailed-forecast__data-container",children:[Object(h.jsx)("div",{className:"detailed-forecast__data-label",children:"Direction"}),Object(h.jsx)("div",{className:"detailed-forecast__data",children:_+" ("+i.wind.deg+"\xb0)"})]})]})})}return null},w=function(){var e=Object(s.c)((function(e){return e.forecast})),t=Object(s.c)((function(e){return e.currentDay}));if(null!==e){var a=function(e){var t=e.list.map((function(e){return new Date(1e3*e.dt).toLocaleDateString("en-US")})).filter((function(e,t,a){return a.indexOf(e)===t})),a=[];return t.map((function(t){var c=[];e.list.map((function(e){new Date(1e3*e.dt).toLocaleDateString("en-US")===t&&c.push(e)})),a.push({date:t,data:c})})),a}(e),c=a.find((function(e){return e.date===t})),r=c.data.map((function(e){return Object(h.jsx)(p,{forecast:e})}));return Object(h.jsxs)("div",{className:"forecast__root-container",children:[Object(h.jsx)("div",{className:"forecast__day-forecasts",children:r}),Object(h.jsx)(N,{forecast:c})]})}return Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:e})})},g=a(14),S=(a(36),function(){var e=Object(s.b)(),t=r.a.useState(""),a=Object(g.a)(t,2),c=a[0],n=a[1];return Object(h.jsxs)("form",{className:"city-search-form",onSubmit:function(t){t.preventDefault(),c&&e({type:"api/putCityInState",payload:c})},children:[Object(h.jsx)("input",{placeholder:"Rechercher une ville",name:"city",value:c,type:"text",onChange:function(e){n(e.target.value)}}),Object(h.jsx)("button",{type:"submit",children:Object(h.jsx)("i",{class:"fab fa-searchengin"})})]})}),D=(a(37),function(e,t){var a=Object(s.b)();fetch("https://api.openweathermap.org/data/2.5/"+t+"?q="+e+"&units=metric&appid=c246844ea31d730273416243a59e9e2e").then((function(e){return e.json()})).then((function(e){console.log(e);var c=e;"404"!=c.cod?"weather"==t?(a({type:"api/putWeatherInState",payload:c}),a({type:"api/putTimezoneInState",payload:c.timezone})):"forecast"==t&&(a({type:"api/putForeCastInState",payload:c}),a({type:"api/putTimezoneInState",payload:c.city.timezone})):"weather"==t?a({type:"api/putWeatherInState",payload:"error"}):"forecast"==t&&a({type:"api/putForeCastInState",payload:null})}))}),C=(a(38),function(){var e=Object(s.c)((function(e){return e.forecast})),t=Object(s.c)((function(e){return e.currentDay})),a=Object(s.b)();if(null!=e){var c=e.list.map((function(e){return new Date(1e3*e.dt).toLocaleDateString("en-US")})).filter((function(e,t,a){return a.indexOf(e)===t}));void 0==c.find((function(e){return e==t}))&&(a({type:"api/putCurrentTimeInState",payload:null}),a({type:"api/putCurrentDayInState",payload:c[0]}));var r=c.map((function(e){return e==t?Object(h.jsxs)("div",{className:"day-selector__day day-selector__day--current",children:[Object(h.jsx)("div",{children:v(e,"dayOfWeek")}),Object(h.jsx)("div",{children:v(e,"dayOfMonth")})]}):Object(h.jsxs)("div",{className:"day-selector__day",onClick:function(){a({type:"api/putCurrentDayInState",payload:e})},children:[Object(h.jsx)("div",{children:v(e,"dayOfWeek")}),Object(h.jsx)("div",{children:v(e,"dayOfMonth")})]})}));return Object(h.jsx)("div",{className:"day-selector",children:r})}return Object(h.jsx)("div",{})});var I=function(){var e=Object(s.c)((function(e){return e.city}));return D(e,"weather"),D(e,"forecast"),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)("div",{className:"search-and-result",children:[Object(h.jsxs)("div",{className:"search-and-result__search-days-container",children:[Object(h.jsx)(S,{}),Object(h.jsx)(C,{})]}),Object(h.jsx)(O,{})]}),Object(h.jsx)(w,{})]})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,40)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),r(e),n(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(s.a,{store:u,children:Object(h.jsx)(I,{})})}),document.getElementById("root")),M()}},[[39,1,2]]]);
//# sourceMappingURL=main.9a90b639.chunk.js.map